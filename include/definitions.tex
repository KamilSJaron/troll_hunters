%% variables
\newcommand\cardwidth{\linewidth}
\newcommand\cardheight{\pageheight}
\newcommand\brackgroundColor{gray} % gray
\def\scrollOneThresh{10}
\def\backgroundOpacity{1}

% card evironment

%   #1 - deck type
%%%% Combat
%%%% Divine
%%%% Sorcery
%%%% Character

%% #2 card class:
%%% characters:
%%%% orc -> DONE
%%%% elf -> DONE
%%%% dwarf -> DONE
%%%% undead
%%%% neutral -> DONE
%%% in play cards:
%%%% equipment -> DONE
%%%% event -> DONE
%%%% enchantment -> DONE
%%%% spell -> DONE

%   #3 - image name


\newenvironment{card}[3]
    {
        \csname setCard#2\endcsname{#3}{#1}
    }
    {
        \newpage
    }

%% place a text box
\newcommand{\placetextbox}[4]{
  \setbox0=\hbox{#3}
  \AddToShipoutPictureFG*{
    \put(\LenToUnit{#1\cardwidth},\LenToUnit{#2\cardheight}){\vtop{{\null}\parbox{#4\cardwidth}{#3}}}
  }
}

%% place a text box
% \newcommand{\placewesttextbox}[4]{
%   \setbox0=\hbox{#3}
%   \AddToShipoutPictureFG*{
%     \put(\LenToUnit{#1\cardwidth},\LenToUnit{#2\cardheight}){\vtop{{\null}\parbox{#4\cardwidth}{#3}}}
%   }
% }

\newcommand{\cardName}[1]{\placetextbox{\nameX}{\nameY}{\centerline{#1}}{\nameBoxsize}}
\newcommand{\cardRace}[1]{\placetextbox{\raceX}{\raceY}{ \fontsize{8}{8.3}\selectfont\centerline{#1}}{\raceBoxsize}}
\newcommand{\cardHP}[1]{\placetextbox{\hpX}{\hpY}{#1}{\hpBoxsize}}
\newcommand{\cardText}[1]{ \placetextbox{\textX}{\textY}{ \fontsize{7}{8}\selectfont \centering #1 }{\textBoxsize} }
\newcommand{\cardDoubleText}[2]{ \placetextbox{\textX}{\textY}{\fontsize{7}{7.3}\selectfont \centering #1 \newline \includegraphics[width=\cardwidth]{include/misc/simple-divider.png}\newline #2 }{\textBoxsize} }



%% ORCS

\newcommand{\setCardOrc}[2]{
    \gdef\nameX{0.08}
    \gdef\nameY{0.948}
    \gdef\nameBoxsize{0.4}

    \gdef\raceX{0.52}
    \gdef\raceY{0.37}
    \gdef\raceBoxsize{0.3}

    \gdef\hpX{0.83}
    \gdef\hpY{0.953}
    \gdef\hpBoxsize{0.1}

    \gdef\textX{0.25}
    \gdef\textY{0.26}
    \gdef\textBoxsize{0.65}

    \setOrcBackground{#1}
}

\newcommand{\setOrcBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/characters.jpg}};
    \node[opacity=1,inner sep=0pt] at (0.457\cardwidth,-0.36\cardheight)
      {\includegraphics[height=0.54\cardheight]{include/pics/characters/#1}};

    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (0.1\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.805\cardwidth,0.5\cardheight) rectangle (0.95\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.054\cardheight) rectangle (0.9\cardwidth,0.1\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.65\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/orc}};

    \StrLen{#1}[\picNameLen]
    \ifthenelse{\picNameLen > \scrollOneThresh}{
      \node[opacity=1,inner sep=0pt] at (0.17\cardwidth,-0.05\cardheight)
      {\includegraphics[width=0.5\cardwidth]{include/misc/scroll_1.png}};
    }{
      \node[opacity=1,inner sep=0pt] at (0.17\cardwidth,-0.05\cardheight)
      {\includegraphics[width=0.35\cardwidth]{include/misc/scroll_2.png}};
    }

    \node[opacity=1,inner sep=0pt] at (0.55\cardwidth,-0.63\cardheight)
    {\includegraphics[width=0.5\cardwidth]{include/misc/scroll_1.png}};

  \end{tikzpicture}
}


%% DWARFS

\newcommand{\setCardDwarf}[2]{
    \gdef\nameX{0.08}
    \gdef\nameY{0.948}
    \gdef\nameBoxsize{0.4}

    \gdef\raceX{0.51}
    \gdef\raceY{0.35}
    \gdef\raceBoxsize{0.3}

    \gdef\hpX{0.8}
    \gdef\hpY{0.93}
    \gdef\hpBoxsize{0.1}

    \gdef\textX{0.26}
    \gdef\textY{0.23}
    \gdef\textBoxsize{0.6}

    \setDwarfBackground{#1}
}

\newcommand{\setDwarfBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/characters.jpg}};
    \node[opacity=1,inner sep=0pt] at (0.457\cardwidth,-0.36\cardheight)
      {\includegraphics[height=0.54\cardheight]{include/pics/characters/#1}};

    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (0.05\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.805\cardwidth,0.5\cardheight) rectangle (0.95\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.11\cardheight) rectangle (0.9\cardwidth,0.13\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.65\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/dwarf}};

    \StrLen{#1}[\picNameLen]
    \ifthenelse{\picNameLen > \scrollOneThresh}{
      \node[opacity=1,inner sep=0pt] at (0.17\cardwidth,-0.05\cardheight)
      {\includegraphics[width=0.5\cardwidth]{include/misc/scroll_1.png}};
    }{
      \node[opacity=1,inner sep=0pt] at (0.17\cardwidth,-0.05\cardheight)
      {\includegraphics[width=0.35\cardwidth]{include/misc/scroll_2.png}};
    }

    \node[opacity=1,inner sep=0pt] at (0.54\cardwidth,-0.65\cardheight)
      {\includegraphics[width=0.5\cardwidth]{include/misc/scroll_1.png}};
  \end{tikzpicture}
}

%% ELVES

\newcommand{\setCardElf}[2]{
    \gdef\nameX{0.08}
    \gdef\nameY{0.948}
    \gdef\nameBoxsize{0.4}

    \gdef\raceX{0.52}
    \gdef\raceY{0.35}
    \gdef\raceBoxsize{0.3}

    \gdef\hpX{0.823}
    \gdef\hpY{0.945}
    \gdef\hpBoxsize{0.1}

    \gdef\textX{0.29}
    \gdef\textY{0.23}
    \gdef\textBoxsize{0.58}

    \setElfBackground{#1}
}

\newcommand{\setElfBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/characters.jpg}};
    \node[opacity=1,inner sep=0pt] at (0.457\cardwidth,-0.36\cardheight)
      {\includegraphics[height=0.54\cardheight]{include/pics/characters/#1}};

    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (0.08\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.815\cardwidth,0.5\cardheight) rectangle (0.95\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.105\cardheight) rectangle (0.9\cardwidth,0.1\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.64\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/elf}};
    \node[opacity=1,inner sep=0pt] at (0.17\cardwidth,-0.05\cardheight)
      {\includegraphics[width=0.35\cardwidth]{include/misc/scroll_2.png}};
    \node[opacity=1,inner sep=0pt] at (0.55\cardwidth,-0.65\cardheight)
      {\includegraphics[width=0.5\cardwidth]{include/misc/scroll_1.png}};
  \end{tikzpicture}
}

%% NEUTRALS
%% LONG

\newcommand{\setCardLongNeutral}[2]{
    \gdef\nameX{0.08}
    \gdef\nameY{0.948}
    \gdef\nameBoxsize{0.4}

    \gdef\raceX{0.52}
    \gdef\raceY{0.35}
    \gdef\raceBoxsize{0.3}

    \gdef\hpX{0.80}
    \gdef\hpY{0.94}
    \gdef\hpBoxsize{0.1}

    \gdef\textX{0.27}
    \gdef\textY{0.23}
    \gdef\textBoxsize{0.58}

    \setNeutralLongBackground{#1}
}

\newcommand{\setNeutralLongBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/characters.jpg}};
    \node[opacity=1,inner sep=0pt] at (0.457\cardwidth,-0.36\cardheight)
      {\includegraphics[height=0.57\cardheight]{include/pics/characters/#1}};

    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (0.04\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.815\cardwidth,0.5\cardheight) rectangle (0.95\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.105\cardheight) rectangle (0.9\cardwidth,0.1\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.64\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/neutral_tall}};
    \node[opacity=1,inner sep=0pt] at (0.17\cardwidth,-0.05\cardheight)
      {\includegraphics[width=0.35\cardwidth]{include/misc/scroll_2.png}};
    \node[opacity=1,inner sep=0pt] at (0.55\cardwidth,-0.65\cardheight)
      {\includegraphics[width=0.5\cardwidth]{include/misc/scroll_1.png}};
  \end{tikzpicture}
}

%% NEUTRALS
%% SHORT

\newcommand{\setCardShortNeutral}[2]{
    \gdef\nameX{0.08}
    \gdef\nameY{0.948}
    \gdef\nameBoxsize{0.4}

    \gdef\raceX{0.51}
    \gdef\raceY{0.42}
    \gdef\raceBoxsize{0.3}

    \gdef\hpX{0.80}
    \gdef\hpY{0.94}
    \gdef\hpBoxsize{0.1}

    \gdef\textX{0.195}
    \gdef\textY{0.305}
    \gdef\textBoxsize{0.70}

    \setNeutralShortBackground{#1}
}

\newcommand{\setNeutralShortBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/characters.jpg}};
    \node[opacity=1,inner sep=0pt] at (0.457\cardwidth,-0.36\cardheight)
      {\includegraphics[height=0.54\cardheight]{include/pics/characters/#1}};

    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (0.04\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.815\cardwidth,0.5\cardheight) rectangle (0.95\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.105\cardheight) rectangle (0.9\cardwidth,0.1\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.575\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/neutral_short}};
    % \stringlength{}
    \node[opacity=1,inner sep=0pt, anchor=west] at (-0.08\cardwidth,-0.05\cardheight)
        {\includegraphics[width=0.48\cardwidth]{include/misc/scroll_1.png}};
    % \node[opacity=1,inner sep=0pt,anchor=west] at (0.17\cardwidth,-0.05\cardheight)
    %   {\includegraphics[width=0.35\cardwidth]{include/misc/scroll_2.png}};
    % {\includegraphics[width=0.58\cardwidth,height=1.9em,keepaspectratio=false]{include/misc/scroll_1.png}};

    \node[opacity=1,inner sep=0pt] at (0.54\cardwidth,-0.58\cardheight)
      {\includegraphics[width=0.5\cardwidth]{include/misc/scroll_1.png}};
  \end{tikzpicture}
}

% DECK CARDS

%%%%%%%%%%
% SPELLS %
%%%%%%%%%%

\newcommand{\setCardSpell}[2]{
    \gdef\nameX{0.2}
    \gdef\nameY{0.975}
    \gdef\nameBoxsize{0.6}

    \gdef\raceX{0.12}
    \gdef\raceY{0.4}
    \gdef\raceBoxsize{0.3}

    \gdef\textX{0.14}
    \gdef\textY{0.3}
    \gdef\textBoxsize{0.7}

    \setSpellBackground{#1}
}

\newcommand{\setSpellBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/decks.jpg}};
    \node[opacity=1,inner sep=0pt] at (0.4\cardwidth,-0.33\cardheight)
      {\includegraphics[height=0.54\cardheight]{include/pics/decks/#1}};

    % to mask overflowing images I am repaining every card gray before I typeset the rest on top of it
    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (0.0\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.765\cardwidth,0.5\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.058\cardheight) rectangle (0.9\cardwidth,0.1\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.55\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/spell.png}};
  \end{tikzpicture}
}

%%%%%%%%%%%%%
% Equipment %
%%%%%%%%%%%%%

\newcommand{\setCardEquipment}[2]{
    \gdef\nameX{0.2}
    \gdef\nameY{0.975}
    \gdef\nameBoxsize{0.6}

    \gdef\raceX{0.11}
    \gdef\raceY{0.4}
    \gdef\raceBoxsize{0.3}

    \gdef\textX{0.14}
    \gdef\textY{0.3}
    \gdef\textBoxsize{0.7}

    \setEquipmentBackground{#1}
}

\newcommand{\setEquipmentBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/decks.jpg}};
      \node[opacity=1,inner sep=0pt] at (0.4\cardwidth,-0.33\cardheight)
        {\includegraphics[height=0.54\cardheight]{include/pics/decks/#1}};

    % to mask overflowing images I am repaining every card gray before I typeset the rest on top of it
    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (-0.01\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.77\cardwidth,0.5\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.054\cardheight) rectangle (0.9\cardwidth,0.1\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.55\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/equipment.png}};
  \end{tikzpicture}
}


%%%%%%%%%%%%%
% Equipment %
%  SHIELD   %
%%%%%%%%%%%%%

\newcommand{\setCardEquipmentShield}[2]{
    \gdef\nameX{0.2}
    \gdef\nameY{0.975}
    \gdef\nameBoxsize{0.6}

    \gdef\raceX{0.16}
    \gdef\raceY{0.4}
    \gdef\raceBoxsize{0.3}

    \gdef\textX{0.16}
    \gdef\textY{0.28}
    \gdef\textBoxsize{0.7}

    \setEquipmentShieldBackground{#1}
}

\newcommand{\setEquipmentShieldBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/decks.jpg}};
      \node[opacity=1,inner sep=0pt] at (0.4\cardwidth,-0.33\cardheight)
        {\includegraphics[height=0.54\cardheight]{include/pics/decks/#1}};

    % to mask overflowing images I am repaining every card gray before I typeset the rest on top of it
    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (-0.01\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.77\cardwidth,0.5\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.054\cardheight) rectangle (0.9\cardwidth,0.1\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.55\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/equipment-shield.png}};
  \end{tikzpicture}
}

%%%%%%%%%%%%%
% Equipment %
%  WEAPON   %
%%%%%%%%%%%%%

\newcommand{\setCardEquipmentWeapon}[2]{
    \gdef\nameX{0.2}
    \gdef\nameY{0.975}
    \gdef\nameBoxsize{0.6}

    \gdef\raceX{0.19}
    \gdef\raceY{0.4}
    \gdef\raceBoxsize{0.3}

    \gdef\textX{0.16}
    \gdef\textY{0.28}
    \gdef\textBoxsize{0.7}

    \setEquipmentWeaponBackground{#1}
}

\newcommand{\setEquipmentWeaponBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/decks.jpg}};
      \node[opacity=1,inner sep=0pt] at (0.4\cardwidth,-0.33\cardheight)
        {\includegraphics[height=0.54\cardheight]{include/pics/decks/#1}};

    % to mask overflowing images I am repaining every card gray before I typeset the rest on top of it
    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (0.0\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.77\cardwidth,0.5\cardheight) rectangle (0.95\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.054\cardheight) rectangle (0.9\cardwidth,0.1\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.55\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/equipment-weapon.png}};
  \end{tikzpicture}
}

%%%%%%%%%
% Event %
%%%%%%%%%

\newcommand{\setCardEvent}[2]{
    \gdef\nameX{0.2}
    \gdef\nameY{0.975}
    \gdef\nameBoxsize{0.6}

    \gdef\raceX{0.12}
    \gdef\raceY{0.4}
    \gdef\raceBoxsize{0.3}

    \gdef\textX{0.14}
    \gdef\textY{0.3}
    \gdef\textBoxsize{0.7}

    \setEventBackground{#1}
}

\newcommand{\setEventBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/decks.jpg}};
    \node[opacity=1,inner sep=0pt] at (0.4\cardwidth,-0.33\cardheight)
      {\includegraphics[height=0.54\cardheight]{include/pics/decks/#1}};
    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/event.png}};
  \end{tikzpicture}
}

%%%%%%%%%%%%%%%
% Enchantment %
%%%%%%%%%%%%%%%

\newcommand{\setCardEnchantment}[2]{
    \gdef\nameX{0.2}
    \gdef\nameY{0.975}
    \gdef\nameBoxsize{0.6}

    \gdef\raceX{0.12}
    \gdef\raceY{0.4}
    \gdef\raceBoxsize{0.3}

    \gdef\textX{0.14}
    \gdef\textY{0.3}
    \gdef\textBoxsize{0.7}

    \setEnchantmentBackground{#1}
}

\newcommand{\setEnchantmentBackground}[1]{
  \begin{tikzpicture}[overlay, remember picture]
    \node[opacity=1,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/decks.jpg}};
    \node[opacity=1,inner sep=0pt] at (0.4\cardwidth,-0.33\cardheight)
      {\includegraphics[height=0.54\cardheight]{include/pics/decks/#1}};

    \fill[\brackgroundColor] (-0.12\cardwidth,0.5\cardheight) rectangle (0.0\cardwidth,-1\cardheight); % left
    \fill[\brackgroundColor] (0.77\cardwidth,0.5\cardheight) rectangle (0.95\cardwidth,-1\cardheight); % right
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.054\cardheight) rectangle (0.9\cardwidth,0.1\cardheight); % top
    \fill[\brackgroundColor] (-0.12\cardwidth,-0.55\cardheight) rectangle (0.9\cardwidth,-1\cardheight); % bot

    \node[opacity=\backgroundOpacity,inner sep=0pt] at (current page.center)
      {\includegraphics[width=\cardwidth,height=\cardheight]{include/background/spell.png}};
  \end{tikzpicture}
}